{% extends 'base.html' %} {% block body %} {% if result %}


<p class = "rating-cound" id = "rating-average" hidden>{{data["Average"]}}</p>
<p class = "rating-cound" id = "rating-best" hidden >{{data["Best"]}}</p>
<p class = "rating-cound" id = "rating-good" hidden>{{data["Good"]}}</p>
<p class = "rating-cound" id = "rating-NA" hidden >{{data["NA"]}}</p>
<p class = "rating-cound" id = "rating-poor" hidden >{{data["Poor"]}}</p>

<div id="piechart"></div>



<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
// Load google charts
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

// Draw the chart and set the chart values
function drawChart() {
    var Average = document.getElementById("rating-average").innerHTML;
    var Best = document.getElementById("rating-best").innerHTML;
    var Good = document.getElementById("rating-good").innerHTML;
    var NA = document.getElementById("rating-NA").innerHTML;
    var Poor = document.getElementById("rating-poor").innerHTML;
    console.log(Best)
  var data = google.visualization.arrayToDataTable([
  ['Rating', 'Number of Products'],
  ['Average', parseInt(Average)],
  ['Best', parseInt(Best)],
  ['Good', parseInt(Good)],
  ['Unable to find', parseInt(NA)],
  ['Poor', parseInt(Poor)]
]);

  // Optional; add a title and set the width and height of the chart
  var options = {'title':'My Average Day', 'width':550, 'height':400};

  // Display the chart inside the <div> element with id="piechart"
  var chart = new google.visualization.PieChart(document.getElementById('piechart'));
  chart.draw(data, options);
}
</script>
<table class="table" id = 't1'>
    <thead>
        <tr>
            <th scope="col">No.</th>
            <th scope="col">Name</th>
            <th scope="col">Description</th>
            <th scope="col">Rating</th>
        </tr>
    </thead>
    <tbody>
        {% for key,value in result.items() %} {% if value[0]=="Best" %}
        <tr class="table-success">
            <th scope="row"></th>
            <td>{{ key }}</td>
            <td>{{ value[1] }}</td>
            <td>{{ value[0] }}</td>
        </tr>
        {% endif %} {% if value[0]=="Good" %}
        <tr class="table-info">
            <th scope="row"></th>
            <td>{{ key }}</td>
            <td>{{ value[1] }}</td>
            <td>{{ value[0] }}</td>
        </tr>
        {% endif %} {% if value[0]=="Average" %}
        <tr class="table-warning">
            <th scope="row"></th>
            <td>{{ key }}</td>
            <td>{{ value[1] }}</td>
            <td>{{ value[0] }}</td>
        </tr>
        {% endif %} {% if value[0]=="Poor" %}
        <tr class="table-danger">
            <th scope="row"></th>
            <td>{{ key }}</td>
            <td>{{ value[1] }}</td>
            <td>{{ value[0] }}</td>
        </tr>
        {% endif %}{% if value[0]=="NA" %}
        <tr class="table-unknown">
            <th scope="row"></th>
            <td>{{ key }}</td>
            <td>{{ value[1] }}</td>
            <td>{{ value[0] }}</td>
        </tr>
        {% endif %} {% endfor %}
    </tbody>
</table>
{% endif %} {% endblock %}